<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chuck Norris Jokes</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        article { border: 1px solid #ffcc00; padding: 15px; margin-bottom: 10px; background-color: #fff8e1; border-radius: 5px; }
        article p { margin: 0; }
    </style>
</head>
<body>

    <h1>Chuck Norris Jokes</h1>

    <h2>Random Joke</h2>
    <p>Check the **Console** (F12) for the random joke.</p>

    <h2>Search Jokes</h2>
    <form id="search-form">
        <input id="query-input" type="text" placeholder="Enter a search term">
        <button type="submit">Search</button>
    </form>

    <div id="results"></div>

    <script>
        async function fetchRandomJoke() {
            try {
                const response = await fetch('https://api.chucknorris.io/jokes/random');
                const data = await response.json();
                console.log("--- Random Joke ---");
                console.log(data.value);
            } catch (error) {
                console.error("Failed to fetch random joke:", error);
            }
        }

        fetchRandomJoke();

        const searchForm = document.getElementById('search-form');
        const queryInput = document.getElementById('query-input');
        const resultsContainer = document.getElementById('results');

        searchForm.addEventListener('submit', async function(event) {
            event.preventDefault();
            resultsContainer.innerHTML = 'Searching...';

            const searchTerm = queryInput.value.trim();

            if (!searchTerm) {
                resultsContainer.innerHTML = '<p>Please enter a search term.</p>';
                return;
            }

            const apiUrl = `https://api.chucknorris.io/jokes/search?query=${encodeURIComponent(searchTerm)}`;

            try {
                const response = await fetch(apiUrl);
                const data = await response.json();

                displaySearchResults(data.result);

            } catch (error) {
                resultsContainer.innerHTML = `<p>Error retrieving jokes: ${error.message}</p>`;
            }
        });

        function displaySearchResults(jokesArray) {
            resultsContainer.innerHTML = '';

            if (jokesArray.length === 0) {
                resultsContainer.innerHTML = '<p>No jokes found.</p>';
                return;
            }

            let htmlContent = `<h3>Found ${jokesArray.length} Jokes:</h3>`;

            jokesArray.forEach(joke => {
                htmlContent += `
                    <article>
                        <p>${joke.value}</p>
                    </article>`;
            });

            resultsContainer.innerHTML = htmlContent;
        }
    </script>

</body>
</html>